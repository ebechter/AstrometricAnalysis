# The iLocater Instrument  
The instrument simulator uses an object-oriented class structure to enable a modular approach to the code architecture. This simulator has been developed initially for the iLocater system but is designed for general instrument simulations. The code is almost entirely written in MATLAB, although it relies on optical design files from Zemax. The mechanical iLocater instrument is organized into three main parts: the acquisition camera, spectrograph, and calibration system. The acquisition camera couples AO-corrected light from the telescope into a single mode fiber that feeds the spectrograph. Similarly, the calibration system injects an etalon spectrum or white light spectrum into the spectrograph, depending on the type of frame needed. All of these optical systems are simulated in this code, as well as the telescope optics and AO system, atmosphere, and stellar spectrum. 

The simulator class design uses the physical divisions of iLocater to define classes when possible. The three super-classes that the entire code is based on are: the Spectrum class, which initializes the type of spectrum or spectra needed according to the mode selected by the user; the Throughput class, which models each optical path of the instrument as a wavelength dependent efficiency curve; and the Simulation class; which combines results from the first two classes, imports Zemax optical design details, and handles converting spectra from 1D to 2D and binning them on the detector in a flux preserving manner. 
## Getting Started

To run this code, you will need a copy of MATLAB on your machine. 

### Dependencies 

There are a lot of extraneous files needed to run this code.

#### Sources

The simulator is currently set up to use three types of input sources. 

1) A range of high resolution stellar models, primarily FGKM stars. These are BT-Settl models sourced from France Allard's [repository](http://perso.ens-lyon.fr/france.allard/). 

2) Flat field spectra are generated by the simulator itself and can be modified to represent specific imperfect white light sources. 

3) Calibration spectra. Emission lamps will need a linelist file to be correctly generated. The simulator can generate a Fabry Perot etalon spectrum with a few specific design parameters.  

#### Atmosphere

1) Telluric spectra are generated using the TAPAS web portal at: 

2) OH emission spectra are based off of Gemini data. These files can be changed by specifying a path to new OH spectra.

#### Observing conditions
zenith angle and seeing -> compute strehl for AO correction for fiber coupling 

#### Throughput
Simulated source models Every optical surface requires an efficiency curve, and the spectrograph component needs a spectral format file. 





### Example Simulation

A step by step series of examples that tell you have to get a development env running

Say what the step will be

```
Give the example
```

And repeat

```
until finished
```

End with an example of getting some data out of the system or using it for a little demo

## Authors

* **Billie Thompson** - *Initial work* - [PurpleBooth](https://github.com/PurpleBooth)

See also the list of [contributors](https://github.com/your/project/contributors) who participated in this project.

## License

This project is licensed under the MIT License - see the [LICENSE.md](LICENSE.md) file for details

## Acknowledgments

* Hat tip to anyone who's code was used
* Inspiration
* etc
